// Code generated by conjure-go. DO NOT EDIT.

package api

import (
	"context"
	"fmt"
	"net/url"

	"github.com/nominal-io/nominal-api/api/rids"
	"github.com/nominal-io/nominal-api/internal/conjureerrors"
	"github.com/palantir/conjure-go-runtime/v2/conjure-go-client/httpclient"
	"github.com/palantir/pkg/bearertoken"
	werror "github.com/palantir/witchcraft-go-error"
)

// Themes service manages themes for exporting charts.
type ThemesServiceClient interface {
	// Get all chart themes saved to the requested workspaces.
	ListChartThemes(ctx context.Context, authHeader bearertoken.Token, workspacesArg []rids.WorkspaceRid) ([]ChartTheme, error)
	// Get a specific chart theme by RID.
	GetChartTheme(ctx context.Context, authHeader bearertoken.Token, chartThemeRidArg ChartThemeRid) (ChartTheme, error)
	// Create a new chart theme.
	CreateChartTheme(ctx context.Context, authHeader bearertoken.Token, requestArg CreateChartThemeRequest) (ChartTheme, error)
	// Update an existing chart theme.
	UpdateChartTheme(ctx context.Context, authHeader bearertoken.Token, chartThemeRidArg ChartThemeRid, requestArg UpdateChartThemeRequest) (ChartTheme, error)
	// Delete an existing comment.
	DeleteChartTheme(ctx context.Context, authHeader bearertoken.Token, chartThemeRidArg ChartThemeRid) error
}

type themesServiceClient struct {
	client httpclient.Client
}

func NewThemesServiceClient(client httpclient.Client) ThemesServiceClient {
	return &themesServiceClient{client: client}
}

func (c *themesServiceClient) ListChartThemes(ctx context.Context, authHeader bearertoken.Token, workspacesArg []rids.WorkspaceRid) ([]ChartTheme, error) {
	var returnVal []ChartTheme
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("ListChartThemes"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("GET"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/themes/v1/chart-themes"))
	queryParams := make(url.Values)
	for _, v := range workspacesArg {
		queryParams.Add("workspaces", fmt.Sprint(v))
	}
	requestParams = append(requestParams, httpclient.WithQueryValues(queryParams))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return nil, werror.WrapWithContextParams(ctx, err, "listChartThemes failed")
	}
	if returnVal == nil {
		return nil, werror.ErrorWithContextParams(ctx, "listChartThemes response cannot be nil")
	}
	return returnVal, nil
}

func (c *themesServiceClient) GetChartTheme(ctx context.Context, authHeader bearertoken.Token, chartThemeRidArg ChartThemeRid) (ChartTheme, error) {
	var defaultReturnVal ChartTheme
	var returnVal *ChartTheme
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("GetChartTheme"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("GET"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/themes/v1/chart-themes/%s", url.PathEscape(fmt.Sprint(chartThemeRidArg))))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "getChartTheme failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "getChartTheme response cannot be nil")
	}
	return *returnVal, nil
}

func (c *themesServiceClient) CreateChartTheme(ctx context.Context, authHeader bearertoken.Token, requestArg CreateChartThemeRequest) (ChartTheme, error) {
	var defaultReturnVal ChartTheme
	var returnVal *ChartTheme
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("CreateChartTheme"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("POST"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/themes/v1/chart-themes"))
	requestParams = append(requestParams, httpclient.WithJSONRequest(requestArg))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "createChartTheme failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "createChartTheme response cannot be nil")
	}
	return *returnVal, nil
}

func (c *themesServiceClient) UpdateChartTheme(ctx context.Context, authHeader bearertoken.Token, chartThemeRidArg ChartThemeRid, requestArg UpdateChartThemeRequest) (ChartTheme, error) {
	var defaultReturnVal ChartTheme
	var returnVal *ChartTheme
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("UpdateChartTheme"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("PUT"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/themes/v1/chart-themes/%s", url.PathEscape(fmt.Sprint(chartThemeRidArg))))
	requestParams = append(requestParams, httpclient.WithJSONRequest(requestArg))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "updateChartTheme failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "updateChartTheme response cannot be nil")
	}
	return *returnVal, nil
}

func (c *themesServiceClient) DeleteChartTheme(ctx context.Context, authHeader bearertoken.Token, chartThemeRidArg ChartThemeRid) error {
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("DeleteChartTheme"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("DELETE"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/themes/v1/chart-themes/%s", url.PathEscape(fmt.Sprint(chartThemeRidArg))))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return werror.WrapWithContextParams(ctx, err, "deleteChartTheme failed")
	}
	return nil
}

// Themes service manages themes for exporting charts.
type ThemesServiceClientWithAuth interface {
	// Get all chart themes saved to the requested workspaces.
	ListChartThemes(ctx context.Context, workspacesArg []rids.WorkspaceRid) ([]ChartTheme, error)
	// Get a specific chart theme by RID.
	GetChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid) (ChartTheme, error)
	// Create a new chart theme.
	CreateChartTheme(ctx context.Context, requestArg CreateChartThemeRequest) (ChartTheme, error)
	// Update an existing chart theme.
	UpdateChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid, requestArg UpdateChartThemeRequest) (ChartTheme, error)
	// Delete an existing comment.
	DeleteChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid) error
}

func NewThemesServiceClientWithAuth(client ThemesServiceClient, authHeader bearertoken.Token) ThemesServiceClientWithAuth {
	return &themesServiceClientWithAuth{client: client, authHeader: authHeader}
}

type themesServiceClientWithAuth struct {
	client     ThemesServiceClient
	authHeader bearertoken.Token
}

func (c *themesServiceClientWithAuth) ListChartThemes(ctx context.Context, workspacesArg []rids.WorkspaceRid) ([]ChartTheme, error) {
	return c.client.ListChartThemes(ctx, c.authHeader, workspacesArg)
}

func (c *themesServiceClientWithAuth) GetChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid) (ChartTheme, error) {
	return c.client.GetChartTheme(ctx, c.authHeader, chartThemeRidArg)
}

func (c *themesServiceClientWithAuth) CreateChartTheme(ctx context.Context, requestArg CreateChartThemeRequest) (ChartTheme, error) {
	return c.client.CreateChartTheme(ctx, c.authHeader, requestArg)
}

func (c *themesServiceClientWithAuth) UpdateChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid, requestArg UpdateChartThemeRequest) (ChartTheme, error) {
	return c.client.UpdateChartTheme(ctx, c.authHeader, chartThemeRidArg, requestArg)
}

func (c *themesServiceClientWithAuth) DeleteChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid) error {
	return c.client.DeleteChartTheme(ctx, c.authHeader, chartThemeRidArg)
}

func NewThemesServiceClientWithTokenProvider(client ThemesServiceClient, tokenProvider httpclient.TokenProvider) ThemesServiceClientWithAuth {
	return &themesServiceClientWithTokenProvider{client: client, tokenProvider: tokenProvider}
}

type themesServiceClientWithTokenProvider struct {
	client        ThemesServiceClient
	tokenProvider httpclient.TokenProvider
}

func (c *themesServiceClientWithTokenProvider) ListChartThemes(ctx context.Context, workspacesArg []rids.WorkspaceRid) ([]ChartTheme, error) {
	var defaultReturnVal []ChartTheme
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.ListChartThemes(ctx, bearertoken.Token(token), workspacesArg)
}

func (c *themesServiceClientWithTokenProvider) GetChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid) (ChartTheme, error) {
	var defaultReturnVal ChartTheme
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.GetChartTheme(ctx, bearertoken.Token(token), chartThemeRidArg)
}

func (c *themesServiceClientWithTokenProvider) CreateChartTheme(ctx context.Context, requestArg CreateChartThemeRequest) (ChartTheme, error) {
	var defaultReturnVal ChartTheme
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.CreateChartTheme(ctx, bearertoken.Token(token), requestArg)
}

func (c *themesServiceClientWithTokenProvider) UpdateChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid, requestArg UpdateChartThemeRequest) (ChartTheme, error) {
	var defaultReturnVal ChartTheme
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.UpdateChartTheme(ctx, bearertoken.Token(token), chartThemeRidArg, requestArg)
}

func (c *themesServiceClientWithTokenProvider) DeleteChartTheme(ctx context.Context, chartThemeRidArg ChartThemeRid) error {
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return err
	}
	return c.client.DeleteChartTheme(ctx, bearertoken.Token(token), chartThemeRidArg)
}
