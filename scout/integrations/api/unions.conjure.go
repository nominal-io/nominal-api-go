// Code generated by conjure-go. DO NOT EDIT.

package api

import (
	"context"
	"fmt"

	"github.com/palantir/pkg/safejson"
	"github.com/palantir/pkg/safeyaml"
)

type CreateIntegrationDetails struct {
	typ                              string
	createSimpleWebhookDetails       *CreateSimpleWebhookDetails
	createOpsgenieIntegrationDetails *CreateOpsgenieIntegrationDetails
}

type createIntegrationDetailsDeserializer struct {
	Type                             string                            `json:"type"`
	CreateSimpleWebhookDetails       *CreateSimpleWebhookDetails       `json:"createSimpleWebhookDetails"`
	CreateOpsgenieIntegrationDetails *CreateOpsgenieIntegrationDetails `json:"createOpsgenieIntegrationDetails"`
}

func (u *createIntegrationDetailsDeserializer) toStruct() CreateIntegrationDetails {
	return CreateIntegrationDetails{typ: u.Type, createSimpleWebhookDetails: u.CreateSimpleWebhookDetails, createOpsgenieIntegrationDetails: u.CreateOpsgenieIntegrationDetails}
}

func (u *CreateIntegrationDetails) toSerializer() (interface{}, error) {
	switch u.typ {
	default:
		return nil, fmt.Errorf("unknown type %q", u.typ)
	case "createSimpleWebhookDetails":
		if u.createSimpleWebhookDetails == nil {
			return nil, fmt.Errorf("field \"createSimpleWebhookDetails\" is required")
		}
		return struct {
			Type                       string                     `json:"type"`
			CreateSimpleWebhookDetails CreateSimpleWebhookDetails `json:"createSimpleWebhookDetails"`
		}{Type: "createSimpleWebhookDetails", CreateSimpleWebhookDetails: *u.createSimpleWebhookDetails}, nil
	case "createOpsgenieIntegrationDetails":
		if u.createOpsgenieIntegrationDetails == nil {
			return nil, fmt.Errorf("field \"createOpsgenieIntegrationDetails\" is required")
		}
		return struct {
			Type                             string                           `json:"type"`
			CreateOpsgenieIntegrationDetails CreateOpsgenieIntegrationDetails `json:"createOpsgenieIntegrationDetails"`
		}{Type: "createOpsgenieIntegrationDetails", CreateOpsgenieIntegrationDetails: *u.createOpsgenieIntegrationDetails}, nil
	}
}

func (u CreateIntegrationDetails) MarshalJSON() ([]byte, error) {
	ser, err := u.toSerializer()
	if err != nil {
		return nil, err
	}
	return safejson.Marshal(ser)
}

func (u *CreateIntegrationDetails) UnmarshalJSON(data []byte) error {
	var deser createIntegrationDetailsDeserializer
	if err := safejson.Unmarshal(data, &deser); err != nil {
		return err
	}
	*u = deser.toStruct()
	switch u.typ {
	case "createSimpleWebhookDetails":
		if u.createSimpleWebhookDetails == nil {
			return fmt.Errorf("field \"createSimpleWebhookDetails\" is required")
		}
	case "createOpsgenieIntegrationDetails":
		if u.createOpsgenieIntegrationDetails == nil {
			return fmt.Errorf("field \"createOpsgenieIntegrationDetails\" is required")
		}
	}
	return nil
}

func (u CreateIntegrationDetails) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(u)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (u *CreateIntegrationDetails) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&u)
}

func (u *CreateIntegrationDetails) AcceptFuncs(createSimpleWebhookDetailsFunc func(CreateSimpleWebhookDetails) error, createOpsgenieIntegrationDetailsFunc func(CreateOpsgenieIntegrationDetails) error, unknownFunc func(string) error) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return unknownFunc(u.typ)
	case "createSimpleWebhookDetails":
		if u.createSimpleWebhookDetails == nil {
			return fmt.Errorf("field \"createSimpleWebhookDetails\" is required")
		}
		return createSimpleWebhookDetailsFunc(*u.createSimpleWebhookDetails)
	case "createOpsgenieIntegrationDetails":
		if u.createOpsgenieIntegrationDetails == nil {
			return fmt.Errorf("field \"createOpsgenieIntegrationDetails\" is required")
		}
		return createOpsgenieIntegrationDetailsFunc(*u.createOpsgenieIntegrationDetails)
	}
}

func (u *CreateIntegrationDetails) CreateSimpleWebhookDetailsNoopSuccess(CreateSimpleWebhookDetails) error {
	return nil
}

func (u *CreateIntegrationDetails) CreateOpsgenieIntegrationDetailsNoopSuccess(CreateOpsgenieIntegrationDetails) error {
	return nil
}

func (u *CreateIntegrationDetails) ErrorOnUnknown(typeName string) error {
	return fmt.Errorf("invalid value in union type. Type name: %s", typeName)
}

func (u *CreateIntegrationDetails) Accept(v CreateIntegrationDetailsVisitor) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknown(u.typ)
	case "createSimpleWebhookDetails":
		if u.createSimpleWebhookDetails == nil {
			return fmt.Errorf("field \"createSimpleWebhookDetails\" is required")
		}
		return v.VisitCreateSimpleWebhookDetails(*u.createSimpleWebhookDetails)
	case "createOpsgenieIntegrationDetails":
		if u.createOpsgenieIntegrationDetails == nil {
			return fmt.Errorf("field \"createOpsgenieIntegrationDetails\" is required")
		}
		return v.VisitCreateOpsgenieIntegrationDetails(*u.createOpsgenieIntegrationDetails)
	}
}

type CreateIntegrationDetailsVisitor interface {
	VisitCreateSimpleWebhookDetails(v CreateSimpleWebhookDetails) error
	VisitCreateOpsgenieIntegrationDetails(v CreateOpsgenieIntegrationDetails) error
	VisitUnknown(typeName string) error
}

func (u *CreateIntegrationDetails) AcceptWithContext(ctx context.Context, v CreateIntegrationDetailsVisitorWithContext) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknownWithContext(ctx, u.typ)
	case "createSimpleWebhookDetails":
		if u.createSimpleWebhookDetails == nil {
			return fmt.Errorf("field \"createSimpleWebhookDetails\" is required")
		}
		return v.VisitCreateSimpleWebhookDetailsWithContext(ctx, *u.createSimpleWebhookDetails)
	case "createOpsgenieIntegrationDetails":
		if u.createOpsgenieIntegrationDetails == nil {
			return fmt.Errorf("field \"createOpsgenieIntegrationDetails\" is required")
		}
		return v.VisitCreateOpsgenieIntegrationDetailsWithContext(ctx, *u.createOpsgenieIntegrationDetails)
	}
}

type CreateIntegrationDetailsVisitorWithContext interface {
	VisitCreateSimpleWebhookDetailsWithContext(ctx context.Context, v CreateSimpleWebhookDetails) error
	VisitCreateOpsgenieIntegrationDetailsWithContext(ctx context.Context, v CreateOpsgenieIntegrationDetails) error
	VisitUnknownWithContext(ctx context.Context, typeName string) error
}

func NewCreateIntegrationDetailsFromCreateSimpleWebhookDetails(v CreateSimpleWebhookDetails) CreateIntegrationDetails {
	return CreateIntegrationDetails{typ: "createSimpleWebhookDetails", createSimpleWebhookDetails: &v}
}

func NewCreateIntegrationDetailsFromCreateOpsgenieIntegrationDetails(v CreateOpsgenieIntegrationDetails) CreateIntegrationDetails {
	return CreateIntegrationDetails{typ: "createOpsgenieIntegrationDetails", createOpsgenieIntegrationDetails: &v}
}

type IntegrationDetails struct {
	typ                      string
	slackWebhookIntegration  *SlackWebhookIntegration
	opsgenieIntegration      *OpsgenieIntegration
	simpleWebhookIntegration *SimpleWebhookIntegration
}

type integrationDetailsDeserializer struct {
	Type                     string                    `json:"type"`
	SlackWebhookIntegration  *SlackWebhookIntegration  `json:"slackWebhookIntegration"`
	OpsgenieIntegration      *OpsgenieIntegration      `json:"opsgenieIntegration"`
	SimpleWebhookIntegration *SimpleWebhookIntegration `json:"simpleWebhookIntegration"`
}

func (u *integrationDetailsDeserializer) toStruct() IntegrationDetails {
	return IntegrationDetails{typ: u.Type, slackWebhookIntegration: u.SlackWebhookIntegration, opsgenieIntegration: u.OpsgenieIntegration, simpleWebhookIntegration: u.SimpleWebhookIntegration}
}

func (u *IntegrationDetails) toSerializer() (interface{}, error) {
	switch u.typ {
	default:
		return nil, fmt.Errorf("unknown type %q", u.typ)
	case "slackWebhookIntegration":
		if u.slackWebhookIntegration == nil {
			return nil, fmt.Errorf("field \"slackWebhookIntegration\" is required")
		}
		return struct {
			Type                    string                  `json:"type"`
			SlackWebhookIntegration SlackWebhookIntegration `json:"slackWebhookIntegration"`
		}{Type: "slackWebhookIntegration", SlackWebhookIntegration: *u.slackWebhookIntegration}, nil
	case "opsgenieIntegration":
		if u.opsgenieIntegration == nil {
			return nil, fmt.Errorf("field \"opsgenieIntegration\" is required")
		}
		return struct {
			Type                string              `json:"type"`
			OpsgenieIntegration OpsgenieIntegration `json:"opsgenieIntegration"`
		}{Type: "opsgenieIntegration", OpsgenieIntegration: *u.opsgenieIntegration}, nil
	case "simpleWebhookIntegration":
		if u.simpleWebhookIntegration == nil {
			return nil, fmt.Errorf("field \"simpleWebhookIntegration\" is required")
		}
		return struct {
			Type                     string                   `json:"type"`
			SimpleWebhookIntegration SimpleWebhookIntegration `json:"simpleWebhookIntegration"`
		}{Type: "simpleWebhookIntegration", SimpleWebhookIntegration: *u.simpleWebhookIntegration}, nil
	}
}

func (u IntegrationDetails) MarshalJSON() ([]byte, error) {
	ser, err := u.toSerializer()
	if err != nil {
		return nil, err
	}
	return safejson.Marshal(ser)
}

func (u *IntegrationDetails) UnmarshalJSON(data []byte) error {
	var deser integrationDetailsDeserializer
	if err := safejson.Unmarshal(data, &deser); err != nil {
		return err
	}
	*u = deser.toStruct()
	switch u.typ {
	case "slackWebhookIntegration":
		if u.slackWebhookIntegration == nil {
			return fmt.Errorf("field \"slackWebhookIntegration\" is required")
		}
	case "opsgenieIntegration":
		if u.opsgenieIntegration == nil {
			return fmt.Errorf("field \"opsgenieIntegration\" is required")
		}
	case "simpleWebhookIntegration":
		if u.simpleWebhookIntegration == nil {
			return fmt.Errorf("field \"simpleWebhookIntegration\" is required")
		}
	}
	return nil
}

func (u IntegrationDetails) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(u)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (u *IntegrationDetails) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&u)
}

func (u *IntegrationDetails) AcceptFuncs(slackWebhookIntegrationFunc func(SlackWebhookIntegration) error, opsgenieIntegrationFunc func(OpsgenieIntegration) error, simpleWebhookIntegrationFunc func(SimpleWebhookIntegration) error, unknownFunc func(string) error) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return unknownFunc(u.typ)
	case "slackWebhookIntegration":
		if u.slackWebhookIntegration == nil {
			return fmt.Errorf("field \"slackWebhookIntegration\" is required")
		}
		return slackWebhookIntegrationFunc(*u.slackWebhookIntegration)
	case "opsgenieIntegration":
		if u.opsgenieIntegration == nil {
			return fmt.Errorf("field \"opsgenieIntegration\" is required")
		}
		return opsgenieIntegrationFunc(*u.opsgenieIntegration)
	case "simpleWebhookIntegration":
		if u.simpleWebhookIntegration == nil {
			return fmt.Errorf("field \"simpleWebhookIntegration\" is required")
		}
		return simpleWebhookIntegrationFunc(*u.simpleWebhookIntegration)
	}
}

func (u *IntegrationDetails) SlackWebhookIntegrationNoopSuccess(SlackWebhookIntegration) error {
	return nil
}

func (u *IntegrationDetails) OpsgenieIntegrationNoopSuccess(OpsgenieIntegration) error {
	return nil
}

func (u *IntegrationDetails) SimpleWebhookIntegrationNoopSuccess(SimpleWebhookIntegration) error {
	return nil
}

func (u *IntegrationDetails) ErrorOnUnknown(typeName string) error {
	return fmt.Errorf("invalid value in union type. Type name: %s", typeName)
}

func (u *IntegrationDetails) Accept(v IntegrationDetailsVisitor) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknown(u.typ)
	case "slackWebhookIntegration":
		if u.slackWebhookIntegration == nil {
			return fmt.Errorf("field \"slackWebhookIntegration\" is required")
		}
		return v.VisitSlackWebhookIntegration(*u.slackWebhookIntegration)
	case "opsgenieIntegration":
		if u.opsgenieIntegration == nil {
			return fmt.Errorf("field \"opsgenieIntegration\" is required")
		}
		return v.VisitOpsgenieIntegration(*u.opsgenieIntegration)
	case "simpleWebhookIntegration":
		if u.simpleWebhookIntegration == nil {
			return fmt.Errorf("field \"simpleWebhookIntegration\" is required")
		}
		return v.VisitSimpleWebhookIntegration(*u.simpleWebhookIntegration)
	}
}

type IntegrationDetailsVisitor interface {
	VisitSlackWebhookIntegration(v SlackWebhookIntegration) error
	VisitOpsgenieIntegration(v OpsgenieIntegration) error
	VisitSimpleWebhookIntegration(v SimpleWebhookIntegration) error
	VisitUnknown(typeName string) error
}

func (u *IntegrationDetails) AcceptWithContext(ctx context.Context, v IntegrationDetailsVisitorWithContext) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknownWithContext(ctx, u.typ)
	case "slackWebhookIntegration":
		if u.slackWebhookIntegration == nil {
			return fmt.Errorf("field \"slackWebhookIntegration\" is required")
		}
		return v.VisitSlackWebhookIntegrationWithContext(ctx, *u.slackWebhookIntegration)
	case "opsgenieIntegration":
		if u.opsgenieIntegration == nil {
			return fmt.Errorf("field \"opsgenieIntegration\" is required")
		}
		return v.VisitOpsgenieIntegrationWithContext(ctx, *u.opsgenieIntegration)
	case "simpleWebhookIntegration":
		if u.simpleWebhookIntegration == nil {
			return fmt.Errorf("field \"simpleWebhookIntegration\" is required")
		}
		return v.VisitSimpleWebhookIntegrationWithContext(ctx, *u.simpleWebhookIntegration)
	}
}

type IntegrationDetailsVisitorWithContext interface {
	VisitSlackWebhookIntegrationWithContext(ctx context.Context, v SlackWebhookIntegration) error
	VisitOpsgenieIntegrationWithContext(ctx context.Context, v OpsgenieIntegration) error
	VisitSimpleWebhookIntegrationWithContext(ctx context.Context, v SimpleWebhookIntegration) error
	VisitUnknownWithContext(ctx context.Context, typeName string) error
}

func NewIntegrationDetailsFromSlackWebhookIntegration(v SlackWebhookIntegration) IntegrationDetails {
	return IntegrationDetails{typ: "slackWebhookIntegration", slackWebhookIntegration: &v}
}

func NewIntegrationDetailsFromOpsgenieIntegration(v OpsgenieIntegration) IntegrationDetails {
	return IntegrationDetails{typ: "opsgenieIntegration", opsgenieIntegration: &v}
}

func NewIntegrationDetailsFromSimpleWebhookIntegration(v SimpleWebhookIntegration) IntegrationDetails {
	return IntegrationDetails{typ: "simpleWebhookIntegration", simpleWebhookIntegration: &v}
}
