// Code generated by conjure-go. DO NOT EDIT.

package api1

import (
	"context"
	"fmt"

	"github.com/nominal-io/nominal-api/scout/checks/api"
	"github.com/palantir/pkg/safejson"
	"github.com/palantir/pkg/safeyaml"
)

type JobResult struct {
	typ            string
	checkJobResult *CheckJobResult
}

type jobResultDeserializer struct {
	Type           string          `json:"type"`
	CheckJobResult *CheckJobResult `json:"checkJobResult"`
}

func (u *jobResultDeserializer) toStruct() JobResult {
	return JobResult{typ: u.Type, checkJobResult: u.CheckJobResult}
}

func (u *JobResult) toSerializer() (interface{}, error) {
	switch u.typ {
	default:
		return nil, fmt.Errorf("unknown type %q", u.typ)
	case "checkJobResult":
		if u.checkJobResult == nil {
			return nil, fmt.Errorf("field \"checkJobResult\" is required")
		}
		return struct {
			Type           string         `json:"type"`
			CheckJobResult CheckJobResult `json:"checkJobResult"`
		}{Type: "checkJobResult", CheckJobResult: *u.checkJobResult}, nil
	}
}

func (u JobResult) MarshalJSON() ([]byte, error) {
	ser, err := u.toSerializer()
	if err != nil {
		return nil, err
	}
	return safejson.Marshal(ser)
}

func (u *JobResult) UnmarshalJSON(data []byte) error {
	var deser jobResultDeserializer
	if err := safejson.Unmarshal(data, &deser); err != nil {
		return err
	}
	*u = deser.toStruct()
	switch u.typ {
	case "checkJobResult":
		if u.checkJobResult == nil {
			return fmt.Errorf("field \"checkJobResult\" is required")
		}
	}
	return nil
}

func (u JobResult) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(u)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (u *JobResult) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&u)
}

func (u *JobResult) AcceptFuncs(checkJobResultFunc func(CheckJobResult) error, unknownFunc func(string) error) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return unknownFunc(u.typ)
	case "checkJobResult":
		if u.checkJobResult == nil {
			return fmt.Errorf("field \"checkJobResult\" is required")
		}
		return checkJobResultFunc(*u.checkJobResult)
	}
}

func (u *JobResult) CheckJobResultNoopSuccess(CheckJobResult) error {
	return nil
}

func (u *JobResult) ErrorOnUnknown(typeName string) error {
	return fmt.Errorf("invalid value in union type. Type name: %s", typeName)
}

func (u *JobResult) Accept(v JobResultVisitor) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknown(u.typ)
	case "checkJobResult":
		if u.checkJobResult == nil {
			return fmt.Errorf("field \"checkJobResult\" is required")
		}
		return v.VisitCheckJobResult(*u.checkJobResult)
	}
}

type JobResultVisitor interface {
	VisitCheckJobResult(v CheckJobResult) error
	VisitUnknown(typeName string) error
}

func (u *JobResult) AcceptWithContext(ctx context.Context, v JobResultVisitorWithContext) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknownWithContext(ctx, u.typ)
	case "checkJobResult":
		if u.checkJobResult == nil {
			return fmt.Errorf("field \"checkJobResult\" is required")
		}
		return v.VisitCheckJobResultWithContext(ctx, *u.checkJobResult)
	}
}

type JobResultVisitorWithContext interface {
	VisitCheckJobResultWithContext(ctx context.Context, v CheckJobResult) error
	VisitUnknownWithContext(ctx context.Context, typeName string) error
}

func NewJobResultFromCheckJobResult(v CheckJobResult) JobResult {
	return JobResult{typ: "checkJobResult", checkJobResult: &v}
}

type JobStatus struct {
	typ        string
	inProgress *api.InProgress
	completed  *Completed
	failed     *api.Failed
}

type jobStatusDeserializer struct {
	Type       string          `json:"type"`
	InProgress *api.InProgress `json:"inProgress"`
	Completed  *Completed      `json:"completed"`
	Failed     *api.Failed     `json:"failed"`
}

func (u *jobStatusDeserializer) toStruct() JobStatus {
	return JobStatus{typ: u.Type, inProgress: u.InProgress, completed: u.Completed, failed: u.Failed}
}

func (u *JobStatus) toSerializer() (interface{}, error) {
	switch u.typ {
	default:
		return nil, fmt.Errorf("unknown type %q", u.typ)
	case "inProgress":
		if u.inProgress == nil {
			return nil, fmt.Errorf("field \"inProgress\" is required")
		}
		return struct {
			Type       string         `json:"type"`
			InProgress api.InProgress `json:"inProgress"`
		}{Type: "inProgress", InProgress: *u.inProgress}, nil
	case "completed":
		if u.completed == nil {
			return nil, fmt.Errorf("field \"completed\" is required")
		}
		return struct {
			Type      string    `json:"type"`
			Completed Completed `json:"completed"`
		}{Type: "completed", Completed: *u.completed}, nil
	case "failed":
		if u.failed == nil {
			return nil, fmt.Errorf("field \"failed\" is required")
		}
		return struct {
			Type   string     `json:"type"`
			Failed api.Failed `json:"failed"`
		}{Type: "failed", Failed: *u.failed}, nil
	}
}

func (u JobStatus) MarshalJSON() ([]byte, error) {
	ser, err := u.toSerializer()
	if err != nil {
		return nil, err
	}
	return safejson.Marshal(ser)
}

func (u *JobStatus) UnmarshalJSON(data []byte) error {
	var deser jobStatusDeserializer
	if err := safejson.Unmarshal(data, &deser); err != nil {
		return err
	}
	*u = deser.toStruct()
	switch u.typ {
	case "inProgress":
		if u.inProgress == nil {
			return fmt.Errorf("field \"inProgress\" is required")
		}
	case "completed":
		if u.completed == nil {
			return fmt.Errorf("field \"completed\" is required")
		}
	case "failed":
		if u.failed == nil {
			return fmt.Errorf("field \"failed\" is required")
		}
	}
	return nil
}

func (u JobStatus) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(u)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (u *JobStatus) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&u)
}

func (u *JobStatus) AcceptFuncs(inProgressFunc func(api.InProgress) error, completedFunc func(Completed) error, failedFunc func(api.Failed) error, unknownFunc func(string) error) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return unknownFunc(u.typ)
	case "inProgress":
		if u.inProgress == nil {
			return fmt.Errorf("field \"inProgress\" is required")
		}
		return inProgressFunc(*u.inProgress)
	case "completed":
		if u.completed == nil {
			return fmt.Errorf("field \"completed\" is required")
		}
		return completedFunc(*u.completed)
	case "failed":
		if u.failed == nil {
			return fmt.Errorf("field \"failed\" is required")
		}
		return failedFunc(*u.failed)
	}
}

func (u *JobStatus) InProgressNoopSuccess(api.InProgress) error {
	return nil
}

func (u *JobStatus) CompletedNoopSuccess(Completed) error {
	return nil
}

func (u *JobStatus) FailedNoopSuccess(api.Failed) error {
	return nil
}

func (u *JobStatus) ErrorOnUnknown(typeName string) error {
	return fmt.Errorf("invalid value in union type. Type name: %s", typeName)
}

func (u *JobStatus) Accept(v JobStatusVisitor) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknown(u.typ)
	case "inProgress":
		if u.inProgress == nil {
			return fmt.Errorf("field \"inProgress\" is required")
		}
		return v.VisitInProgress(*u.inProgress)
	case "completed":
		if u.completed == nil {
			return fmt.Errorf("field \"completed\" is required")
		}
		return v.VisitCompleted(*u.completed)
	case "failed":
		if u.failed == nil {
			return fmt.Errorf("field \"failed\" is required")
		}
		return v.VisitFailed(*u.failed)
	}
}

type JobStatusVisitor interface {
	VisitInProgress(v api.InProgress) error
	VisitCompleted(v Completed) error
	VisitFailed(v api.Failed) error
	VisitUnknown(typeName string) error
}

func (u *JobStatus) AcceptWithContext(ctx context.Context, v JobStatusVisitorWithContext) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknownWithContext(ctx, u.typ)
	case "inProgress":
		if u.inProgress == nil {
			return fmt.Errorf("field \"inProgress\" is required")
		}
		return v.VisitInProgressWithContext(ctx, *u.inProgress)
	case "completed":
		if u.completed == nil {
			return fmt.Errorf("field \"completed\" is required")
		}
		return v.VisitCompletedWithContext(ctx, *u.completed)
	case "failed":
		if u.failed == nil {
			return fmt.Errorf("field \"failed\" is required")
		}
		return v.VisitFailedWithContext(ctx, *u.failed)
	}
}

type JobStatusVisitorWithContext interface {
	VisitInProgressWithContext(ctx context.Context, v api.InProgress) error
	VisitCompletedWithContext(ctx context.Context, v Completed) error
	VisitFailedWithContext(ctx context.Context, v api.Failed) error
	VisitUnknownWithContext(ctx context.Context, typeName string) error
}

func NewJobStatusFromInProgress(v api.InProgress) JobStatus {
	return JobStatus{typ: "inProgress", inProgress: &v}
}

func NewJobStatusFromCompleted(v Completed) JobStatus {
	return JobStatus{typ: "completed", completed: &v}
}

func NewJobStatusFromFailed(v api.Failed) JobStatus {
	return JobStatus{typ: "failed", failed: &v}
}
