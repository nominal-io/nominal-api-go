// Code generated by conjure-go. DO NOT EDIT.

package metadata

import (
	"context"
	"fmt"

	"github.com/nominal-io/nominal-api/internal/conjureerrors"
	"github.com/palantir/conjure-go-runtime/v2/conjure-go-client/httpclient"
	"github.com/palantir/pkg/bearertoken"
	werror "github.com/palantir/witchcraft-go-error"
)

// The Resource Metadata Service provides common metadata about resources.
type ResourceMetadataServiceClient interface {
	/*
	   Returns all existing properties (key value pairs) and labels, which can be used to organize resources
	   such as runs and videos.
	*/
	ListPropertiesAndLabels(ctx context.Context, authHeader bearertoken.Token, requestArg ListPropertiesAndLabelsRequest) (ListPropertiesAndLabelsResponse, error)
}

type resourceMetadataServiceClient struct {
	client httpclient.Client
}

func NewResourceMetadataServiceClient(client httpclient.Client) ResourceMetadataServiceClient {
	return &resourceMetadataServiceClient{client: client}
}

func (c *resourceMetadataServiceClient) ListPropertiesAndLabels(ctx context.Context, authHeader bearertoken.Token, requestArg ListPropertiesAndLabelsRequest) (ListPropertiesAndLabelsResponse, error) {
	var defaultReturnVal ListPropertiesAndLabelsResponse
	var returnVal *ListPropertiesAndLabelsResponse
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("ListPropertiesAndLabels"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("POST"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/scout/v1/metadata/list-properties-labels"))
	requestParams = append(requestParams, httpclient.WithJSONRequest(requestArg))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "listPropertiesAndLabels failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "listPropertiesAndLabels response cannot be nil")
	}
	return *returnVal, nil
}

// The Resource Metadata Service provides common metadata about resources.
type ResourceMetadataServiceClientWithAuth interface {
	/*
	   Returns all existing properties (key value pairs) and labels, which can be used to organize resources
	   such as runs and videos.
	*/
	ListPropertiesAndLabels(ctx context.Context, requestArg ListPropertiesAndLabelsRequest) (ListPropertiesAndLabelsResponse, error)
}

func NewResourceMetadataServiceClientWithAuth(client ResourceMetadataServiceClient, authHeader bearertoken.Token) ResourceMetadataServiceClientWithAuth {
	return &resourceMetadataServiceClientWithAuth{client: client, authHeader: authHeader}
}

type resourceMetadataServiceClientWithAuth struct {
	client     ResourceMetadataServiceClient
	authHeader bearertoken.Token
}

func (c *resourceMetadataServiceClientWithAuth) ListPropertiesAndLabels(ctx context.Context, requestArg ListPropertiesAndLabelsRequest) (ListPropertiesAndLabelsResponse, error) {
	return c.client.ListPropertiesAndLabels(ctx, c.authHeader, requestArg)
}

func NewResourceMetadataServiceClientWithTokenProvider(client ResourceMetadataServiceClient, tokenProvider httpclient.TokenProvider) ResourceMetadataServiceClientWithAuth {
	return &resourceMetadataServiceClientWithTokenProvider{client: client, tokenProvider: tokenProvider}
}

type resourceMetadataServiceClientWithTokenProvider struct {
	client        ResourceMetadataServiceClient
	tokenProvider httpclient.TokenProvider
}

func (c *resourceMetadataServiceClientWithTokenProvider) ListPropertiesAndLabels(ctx context.Context, requestArg ListPropertiesAndLabelsRequest) (ListPropertiesAndLabelsResponse, error) {
	var defaultReturnVal ListPropertiesAndLabelsResponse
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.ListPropertiesAndLabels(ctx, bearertoken.Token(token), requestArg)
}
