// Code generated by conjure-go. DO NOT EDIT.

package api

import (
	"github.com/nominal-io/nominal-api-go/scout/compute/api"
	"github.com/nominal-io/nominal-api-go/scout/compute/api1"
	"github.com/palantir/pkg/safejson"
	"github.com/palantir/pkg/safeyaml"
)

type ChannelVariable struct {
	DisplayName  *string             `json:"displayName,omitempty"`
	VariableName ChannelVariableName `json:"variableName"`
	ComputeSpec  ComputeSpec         `json:"computeSpec"`
	// optional for backcompatibility. If empty, fall back to computeSpec.
	ComputeSpecV2 *ComputeNodeWithContext `conjure-docs:"optional for backcompatibility. If empty, fall back to computeSpec." json:"computeSpecV2,omitempty"`
}

func (o ChannelVariable) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(o)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (o *ChannelVariable) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&o)
}

type ComputeNodeWithContext struct {
	ComputeNode api1.ComputeNode `json:"computeNode"`
	Context     WorkbookContext  `json:"context"`
}

func (o ComputeNodeWithContext) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(o)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (o *ComputeNodeWithContext) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&o)
}

type WorkbookContext struct {
	Variables map[api.VariableName]VariableLocator `json:"variables"`
}

func (o WorkbookContext) MarshalJSON() ([]byte, error) {
	if o.Variables == nil {
		o.Variables = make(map[api.VariableName]VariableLocator, 0)
	}
	type _tmpWorkbookContext WorkbookContext
	return safejson.Marshal(_tmpWorkbookContext(o))
}

func (o *WorkbookContext) UnmarshalJSON(data []byte) error {
	type _tmpWorkbookContext WorkbookContext
	var rawWorkbookContext _tmpWorkbookContext
	if err := safejson.Unmarshal(data, &rawWorkbookContext); err != nil {
		return err
	}
	if rawWorkbookContext.Variables == nil {
		rawWorkbookContext.Variables = make(map[api.VariableName]VariableLocator, 0)
	}
	*o = WorkbookContext(rawWorkbookContext)
	return nil
}

func (o WorkbookContext) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(o)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (o *WorkbookContext) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&o)
}
