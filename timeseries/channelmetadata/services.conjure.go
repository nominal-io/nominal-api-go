// Code generated by conjure-go. DO NOT EDIT.

package channelmetadata

import (
	"context"
	"fmt"

	"github.com/nominal-io/nominal-api/internal/conjureerrors"
	"github.com/nominal-io/nominal-api/timeseries/channelmetadata/api"
	"github.com/palantir/conjure-go-runtime/v2/conjure-go-client/httpclient"
	"github.com/palantir/pkg/bearertoken"
	werror "github.com/palantir/witchcraft-go-error"
)

// Endpoints for retrieving and updating channel metadata.
type ChannelMetadataServiceClient interface {
	// Get the metadata for a channel.
	GetChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.GetChannelMetadataRequest) (api.ChannelMetadata, error)
	/*
	   Batch get the metadata for multiple channels. If some channels cannot be found or authorized,
	   they will be omitted from the response.
	*/
	BatchGetChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.BatchGetChannelMetadataRequest) (api.BatchGetChannelMetadataResponse, error)
	// Update the metadata for a channel.
	UpdateChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.UpdateChannelMetadataRequest) (api.ChannelMetadata, error)
	/*
	   Batch update the metadata for multiple channels. If some channels cannot be found or authorized,
	   no metadata will be updated for any of the channels in the request.
	*/
	BatchUpdateChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.BatchUpdateChannelMetadataRequest) (api.BatchUpdateChannelMetadataResponse, error)
}

type channelMetadataServiceClient struct {
	client httpclient.Client
}

func NewChannelMetadataServiceClient(client httpclient.Client) ChannelMetadataServiceClient {
	return &channelMetadataServiceClient{client: client}
}

func (c *channelMetadataServiceClient) GetChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.GetChannelMetadataRequest) (api.ChannelMetadata, error) {
	var defaultReturnVal api.ChannelMetadata
	var returnVal *api.ChannelMetadata
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("GetChannelMetadata"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("POST"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/timeseries/channel-metadata/v1/channel-metadata/get"))
	requestParams = append(requestParams, httpclient.WithJSONRequest(requestArg))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "getChannelMetadata failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "getChannelMetadata response cannot be nil")
	}
	return *returnVal, nil
}

func (c *channelMetadataServiceClient) BatchGetChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.BatchGetChannelMetadataRequest) (api.BatchGetChannelMetadataResponse, error) {
	var defaultReturnVal api.BatchGetChannelMetadataResponse
	var returnVal *api.BatchGetChannelMetadataResponse
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("BatchGetChannelMetadata"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("POST"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/timeseries/channel-metadata/v1/channel-metadata/batch-get"))
	requestParams = append(requestParams, httpclient.WithJSONRequest(requestArg))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "batchGetChannelMetadata failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "batchGetChannelMetadata response cannot be nil")
	}
	return *returnVal, nil
}

func (c *channelMetadataServiceClient) UpdateChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.UpdateChannelMetadataRequest) (api.ChannelMetadata, error) {
	var defaultReturnVal api.ChannelMetadata
	var returnVal *api.ChannelMetadata
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("UpdateChannelMetadata"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("POST"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/timeseries/channel-metadata/v1/channel-metadata/update"))
	requestParams = append(requestParams, httpclient.WithJSONRequest(requestArg))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "updateChannelMetadata failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "updateChannelMetadata response cannot be nil")
	}
	return *returnVal, nil
}

func (c *channelMetadataServiceClient) BatchUpdateChannelMetadata(ctx context.Context, authHeader bearertoken.Token, requestArg api.BatchUpdateChannelMetadataRequest) (api.BatchUpdateChannelMetadataResponse, error) {
	var defaultReturnVal api.BatchUpdateChannelMetadataResponse
	var returnVal *api.BatchUpdateChannelMetadataResponse
	var requestParams []httpclient.RequestParam
	requestParams = append(requestParams, httpclient.WithRPCMethodName("BatchUpdateChannelMetadata"))
	requestParams = append(requestParams, httpclient.WithRequestMethod("POST"))
	requestParams = append(requestParams, httpclient.WithHeader("Authorization", fmt.Sprint("Bearer ", authHeader)))
	requestParams = append(requestParams, httpclient.WithPathf("/timeseries/channel-metadata/v1/channel-metadata/batch-update"))
	requestParams = append(requestParams, httpclient.WithJSONRequest(requestArg))
	requestParams = append(requestParams, httpclient.WithJSONResponse(&returnVal))
	requestParams = append(requestParams, httpclient.WithRequestConjureErrorDecoder(conjureerrors.Decoder()))
	if _, err := c.client.Do(ctx, requestParams...); err != nil {
		return defaultReturnVal, werror.WrapWithContextParams(ctx, err, "batchUpdateChannelMetadata failed")
	}
	if returnVal == nil {
		return defaultReturnVal, werror.ErrorWithContextParams(ctx, "batchUpdateChannelMetadata response cannot be nil")
	}
	return *returnVal, nil
}

// Endpoints for retrieving and updating channel metadata.
type ChannelMetadataServiceClientWithAuth interface {
	// Get the metadata for a channel.
	GetChannelMetadata(ctx context.Context, requestArg api.GetChannelMetadataRequest) (api.ChannelMetadata, error)
	/*
	   Batch get the metadata for multiple channels. If some channels cannot be found or authorized,
	   they will be omitted from the response.
	*/
	BatchGetChannelMetadata(ctx context.Context, requestArg api.BatchGetChannelMetadataRequest) (api.BatchGetChannelMetadataResponse, error)
	// Update the metadata for a channel.
	UpdateChannelMetadata(ctx context.Context, requestArg api.UpdateChannelMetadataRequest) (api.ChannelMetadata, error)
	/*
	   Batch update the metadata for multiple channels. If some channels cannot be found or authorized,
	   no metadata will be updated for any of the channels in the request.
	*/
	BatchUpdateChannelMetadata(ctx context.Context, requestArg api.BatchUpdateChannelMetadataRequest) (api.BatchUpdateChannelMetadataResponse, error)
}

func NewChannelMetadataServiceClientWithAuth(client ChannelMetadataServiceClient, authHeader bearertoken.Token) ChannelMetadataServiceClientWithAuth {
	return &channelMetadataServiceClientWithAuth{client: client, authHeader: authHeader}
}

type channelMetadataServiceClientWithAuth struct {
	client     ChannelMetadataServiceClient
	authHeader bearertoken.Token
}

func (c *channelMetadataServiceClientWithAuth) GetChannelMetadata(ctx context.Context, requestArg api.GetChannelMetadataRequest) (api.ChannelMetadata, error) {
	return c.client.GetChannelMetadata(ctx, c.authHeader, requestArg)
}

func (c *channelMetadataServiceClientWithAuth) BatchGetChannelMetadata(ctx context.Context, requestArg api.BatchGetChannelMetadataRequest) (api.BatchGetChannelMetadataResponse, error) {
	return c.client.BatchGetChannelMetadata(ctx, c.authHeader, requestArg)
}

func (c *channelMetadataServiceClientWithAuth) UpdateChannelMetadata(ctx context.Context, requestArg api.UpdateChannelMetadataRequest) (api.ChannelMetadata, error) {
	return c.client.UpdateChannelMetadata(ctx, c.authHeader, requestArg)
}

func (c *channelMetadataServiceClientWithAuth) BatchUpdateChannelMetadata(ctx context.Context, requestArg api.BatchUpdateChannelMetadataRequest) (api.BatchUpdateChannelMetadataResponse, error) {
	return c.client.BatchUpdateChannelMetadata(ctx, c.authHeader, requestArg)
}

func NewChannelMetadataServiceClientWithTokenProvider(client ChannelMetadataServiceClient, tokenProvider httpclient.TokenProvider) ChannelMetadataServiceClientWithAuth {
	return &channelMetadataServiceClientWithTokenProvider{client: client, tokenProvider: tokenProvider}
}

type channelMetadataServiceClientWithTokenProvider struct {
	client        ChannelMetadataServiceClient
	tokenProvider httpclient.TokenProvider
}

func (c *channelMetadataServiceClientWithTokenProvider) GetChannelMetadata(ctx context.Context, requestArg api.GetChannelMetadataRequest) (api.ChannelMetadata, error) {
	var defaultReturnVal api.ChannelMetadata
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.GetChannelMetadata(ctx, bearertoken.Token(token), requestArg)
}

func (c *channelMetadataServiceClientWithTokenProvider) BatchGetChannelMetadata(ctx context.Context, requestArg api.BatchGetChannelMetadataRequest) (api.BatchGetChannelMetadataResponse, error) {
	var defaultReturnVal api.BatchGetChannelMetadataResponse
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.BatchGetChannelMetadata(ctx, bearertoken.Token(token), requestArg)
}

func (c *channelMetadataServiceClientWithTokenProvider) UpdateChannelMetadata(ctx context.Context, requestArg api.UpdateChannelMetadataRequest) (api.ChannelMetadata, error) {
	var defaultReturnVal api.ChannelMetadata
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.UpdateChannelMetadata(ctx, bearertoken.Token(token), requestArg)
}

func (c *channelMetadataServiceClientWithTokenProvider) BatchUpdateChannelMetadata(ctx context.Context, requestArg api.BatchUpdateChannelMetadataRequest) (api.BatchUpdateChannelMetadataResponse, error) {
	var defaultReturnVal api.BatchUpdateChannelMetadataResponse
	token, err := c.tokenProvider(ctx)
	if err != nil {
		return defaultReturnVal, err
	}
	return c.client.BatchUpdateChannelMetadata(ctx, bearertoken.Token(token), requestArg)
}
