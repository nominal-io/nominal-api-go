// Code generated by conjure-go. DO NOT EDIT.

package api

import (
	"context"
	"fmt"

	"github.com/nominal-io/nominal-api/io/nominal/api"
	"github.com/palantir/pkg/safejson"
	"github.com/palantir/pkg/safeyaml"
)

type ChannelOrPrefix struct {
	typ     string
	channel *ChannelMetadata
	prefix  *DataSourcePrefixNode
}

type channelOrPrefixDeserializer struct {
	Type    string                `json:"type"`
	Channel *ChannelMetadata      `json:"channel"`
	Prefix  *DataSourcePrefixNode `json:"prefix"`
}

func (u *channelOrPrefixDeserializer) toStruct() ChannelOrPrefix {
	return ChannelOrPrefix{typ: u.Type, channel: u.Channel, prefix: u.Prefix}
}

func (u *ChannelOrPrefix) toSerializer() (interface{}, error) {
	switch u.typ {
	default:
		return nil, fmt.Errorf("unknown type %q", u.typ)
	case "channel":
		if u.channel == nil {
			return nil, fmt.Errorf("field \"channel\" is required")
		}
		return struct {
			Type    string          `json:"type"`
			Channel ChannelMetadata `json:"channel"`
		}{Type: "channel", Channel: *u.channel}, nil
	case "prefix":
		if u.prefix == nil {
			return nil, fmt.Errorf("field \"prefix\" is required")
		}
		return struct {
			Type   string               `json:"type"`
			Prefix DataSourcePrefixNode `json:"prefix"`
		}{Type: "prefix", Prefix: *u.prefix}, nil
	}
}

func (u ChannelOrPrefix) MarshalJSON() ([]byte, error) {
	ser, err := u.toSerializer()
	if err != nil {
		return nil, err
	}
	return safejson.Marshal(ser)
}

func (u *ChannelOrPrefix) UnmarshalJSON(data []byte) error {
	var deser channelOrPrefixDeserializer
	if err := safejson.Unmarshal(data, &deser); err != nil {
		return err
	}
	*u = deser.toStruct()
	switch u.typ {
	case "channel":
		if u.channel == nil {
			return fmt.Errorf("field \"channel\" is required")
		}
	case "prefix":
		if u.prefix == nil {
			return fmt.Errorf("field \"prefix\" is required")
		}
	}
	return nil
}

func (u ChannelOrPrefix) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(u)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (u *ChannelOrPrefix) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&u)
}

func (u *ChannelOrPrefix) AcceptFuncs(channelFunc func(ChannelMetadata) error, prefixFunc func(DataSourcePrefixNode) error, unknownFunc func(string) error) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return unknownFunc(u.typ)
	case "channel":
		if u.channel == nil {
			return fmt.Errorf("field \"channel\" is required")
		}
		return channelFunc(*u.channel)
	case "prefix":
		if u.prefix == nil {
			return fmt.Errorf("field \"prefix\" is required")
		}
		return prefixFunc(*u.prefix)
	}
}

func (u *ChannelOrPrefix) ChannelNoopSuccess(ChannelMetadata) error {
	return nil
}

func (u *ChannelOrPrefix) PrefixNoopSuccess(DataSourcePrefixNode) error {
	return nil
}

func (u *ChannelOrPrefix) ErrorOnUnknown(typeName string) error {
	return fmt.Errorf("invalid value in union type. Type name: %s", typeName)
}

func (u *ChannelOrPrefix) Accept(v ChannelOrPrefixVisitor) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknown(u.typ)
	case "channel":
		if u.channel == nil {
			return fmt.Errorf("field \"channel\" is required")
		}
		return v.VisitChannel(*u.channel)
	case "prefix":
		if u.prefix == nil {
			return fmt.Errorf("field \"prefix\" is required")
		}
		return v.VisitPrefix(*u.prefix)
	}
}

type ChannelOrPrefixVisitor interface {
	VisitChannel(v ChannelMetadata) error
	VisitPrefix(v DataSourcePrefixNode) error
	VisitUnknown(typeName string) error
}

func (u *ChannelOrPrefix) AcceptWithContext(ctx context.Context, v ChannelOrPrefixVisitorWithContext) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknownWithContext(ctx, u.typ)
	case "channel":
		if u.channel == nil {
			return fmt.Errorf("field \"channel\" is required")
		}
		return v.VisitChannelWithContext(ctx, *u.channel)
	case "prefix":
		if u.prefix == nil {
			return fmt.Errorf("field \"prefix\" is required")
		}
		return v.VisitPrefixWithContext(ctx, *u.prefix)
	}
}

type ChannelOrPrefixVisitorWithContext interface {
	VisitChannelWithContext(ctx context.Context, v ChannelMetadata) error
	VisitPrefixWithContext(ctx context.Context, v DataSourcePrefixNode) error
	VisitUnknownWithContext(ctx context.Context, typeName string) error
}

func NewChannelOrPrefixFromChannel(v ChannelMetadata) ChannelOrPrefix {
	return ChannelOrPrefix{typ: "channel", channel: &v}
}

func NewChannelOrPrefixFromPrefix(v DataSourcePrefixNode) ChannelOrPrefix {
	return ChannelOrPrefix{typ: "prefix", prefix: &v}
}

type SeriesArchetypeRidOrLogicalSeriesRid struct {
	typ             string
	seriesArchetype *api.SeriesArchetypeRid
	logicalSeries   *api.LogicalSeriesRid
}

type seriesArchetypeRidOrLogicalSeriesRidDeserializer struct {
	Type            string                  `json:"type"`
	SeriesArchetype *api.SeriesArchetypeRid `json:"seriesArchetype"`
	LogicalSeries   *api.LogicalSeriesRid   `json:"logicalSeries"`
}

func (u *seriesArchetypeRidOrLogicalSeriesRidDeserializer) toStruct() SeriesArchetypeRidOrLogicalSeriesRid {
	return SeriesArchetypeRidOrLogicalSeriesRid{typ: u.Type, seriesArchetype: u.SeriesArchetype, logicalSeries: u.LogicalSeries}
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) toSerializer() (interface{}, error) {
	switch u.typ {
	default:
		return nil, fmt.Errorf("unknown type %q", u.typ)
	case "seriesArchetype":
		if u.seriesArchetype == nil {
			return nil, fmt.Errorf("field \"seriesArchetype\" is required")
		}
		return struct {
			Type            string                 `json:"type"`
			SeriesArchetype api.SeriesArchetypeRid `json:"seriesArchetype"`
		}{Type: "seriesArchetype", SeriesArchetype: *u.seriesArchetype}, nil
	case "logicalSeries":
		if u.logicalSeries == nil {
			return nil, fmt.Errorf("field \"logicalSeries\" is required")
		}
		return struct {
			Type          string               `json:"type"`
			LogicalSeries api.LogicalSeriesRid `json:"logicalSeries"`
		}{Type: "logicalSeries", LogicalSeries: *u.logicalSeries}, nil
	}
}

func (u SeriesArchetypeRidOrLogicalSeriesRid) MarshalJSON() ([]byte, error) {
	ser, err := u.toSerializer()
	if err != nil {
		return nil, err
	}
	return safejson.Marshal(ser)
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) UnmarshalJSON(data []byte) error {
	var deser seriesArchetypeRidOrLogicalSeriesRidDeserializer
	if err := safejson.Unmarshal(data, &deser); err != nil {
		return err
	}
	*u = deser.toStruct()
	switch u.typ {
	case "seriesArchetype":
		if u.seriesArchetype == nil {
			return fmt.Errorf("field \"seriesArchetype\" is required")
		}
	case "logicalSeries":
		if u.logicalSeries == nil {
			return fmt.Errorf("field \"logicalSeries\" is required")
		}
	}
	return nil
}

func (u SeriesArchetypeRidOrLogicalSeriesRid) MarshalYAML() (interface{}, error) {
	jsonBytes, err := safejson.Marshal(u)
	if err != nil {
		return nil, err
	}
	return safeyaml.JSONtoYAMLMapSlice(jsonBytes)
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) UnmarshalYAML(unmarshal func(interface{}) error) error {
	jsonBytes, err := safeyaml.UnmarshalerToJSONBytes(unmarshal)
	if err != nil {
		return err
	}
	return safejson.Unmarshal(jsonBytes, *&u)
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) AcceptFuncs(seriesArchetypeFunc func(api.SeriesArchetypeRid) error, logicalSeriesFunc func(api.LogicalSeriesRid) error, unknownFunc func(string) error) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return unknownFunc(u.typ)
	case "seriesArchetype":
		if u.seriesArchetype == nil {
			return fmt.Errorf("field \"seriesArchetype\" is required")
		}
		return seriesArchetypeFunc(*u.seriesArchetype)
	case "logicalSeries":
		if u.logicalSeries == nil {
			return fmt.Errorf("field \"logicalSeries\" is required")
		}
		return logicalSeriesFunc(*u.logicalSeries)
	}
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) SeriesArchetypeNoopSuccess(api.SeriesArchetypeRid) error {
	return nil
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) LogicalSeriesNoopSuccess(api.LogicalSeriesRid) error {
	return nil
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) ErrorOnUnknown(typeName string) error {
	return fmt.Errorf("invalid value in union type. Type name: %s", typeName)
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) Accept(v SeriesArchetypeRidOrLogicalSeriesRidVisitor) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknown(u.typ)
	case "seriesArchetype":
		if u.seriesArchetype == nil {
			return fmt.Errorf("field \"seriesArchetype\" is required")
		}
		return v.VisitSeriesArchetype(*u.seriesArchetype)
	case "logicalSeries":
		if u.logicalSeries == nil {
			return fmt.Errorf("field \"logicalSeries\" is required")
		}
		return v.VisitLogicalSeries(*u.logicalSeries)
	}
}

type SeriesArchetypeRidOrLogicalSeriesRidVisitor interface {
	VisitSeriesArchetype(v api.SeriesArchetypeRid) error
	VisitLogicalSeries(v api.LogicalSeriesRid) error
	VisitUnknown(typeName string) error
}

func (u *SeriesArchetypeRidOrLogicalSeriesRid) AcceptWithContext(ctx context.Context, v SeriesArchetypeRidOrLogicalSeriesRidVisitorWithContext) error {
	switch u.typ {
	default:
		if u.typ == "" {
			return fmt.Errorf("invalid value in union type")
		}
		return v.VisitUnknownWithContext(ctx, u.typ)
	case "seriesArchetype":
		if u.seriesArchetype == nil {
			return fmt.Errorf("field \"seriesArchetype\" is required")
		}
		return v.VisitSeriesArchetypeWithContext(ctx, *u.seriesArchetype)
	case "logicalSeries":
		if u.logicalSeries == nil {
			return fmt.Errorf("field \"logicalSeries\" is required")
		}
		return v.VisitLogicalSeriesWithContext(ctx, *u.logicalSeries)
	}
}

type SeriesArchetypeRidOrLogicalSeriesRidVisitorWithContext interface {
	VisitSeriesArchetypeWithContext(ctx context.Context, v api.SeriesArchetypeRid) error
	VisitLogicalSeriesWithContext(ctx context.Context, v api.LogicalSeriesRid) error
	VisitUnknownWithContext(ctx context.Context, typeName string) error
}

func NewSeriesArchetypeRidOrLogicalSeriesRidFromSeriesArchetype(v api.SeriesArchetypeRid) SeriesArchetypeRidOrLogicalSeriesRid {
	return SeriesArchetypeRidOrLogicalSeriesRid{typ: "seriesArchetype", seriesArchetype: &v}
}

func NewSeriesArchetypeRidOrLogicalSeriesRidFromLogicalSeries(v api.LogicalSeriesRid) SeriesArchetypeRidOrLogicalSeriesRid {
	return SeriesArchetypeRidOrLogicalSeriesRid{typ: "logicalSeries", logicalSeries: &v}
}
